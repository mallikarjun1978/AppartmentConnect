<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

	<style>
	    /* General body styling */
	    body {
	        font-family: 'Arial', sans-serif;
	        background-color: #f4f4f4;
	        color: #333;
	    }

	    /* Center the main content */
	    main {
	        background-color: #fff;
	        border-radius: 8px;
	        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	        padding: 30px;
	        margin-top: 20px;
	    }

	    /* Heading style */
	    h1 {
	        font-size: 2.5rem;
	        font-weight: bold;
	        color: #333;
	    }

	    /* Card Styling */
	    .card {
	        border-radius: 8px;
	        overflow: hidden;
	        border: none;
	        background-color: #fff;
	    }

	    .card-body {
	        padding: 20px;
	    }

	    .card-title {
	        font-size: 1.5rem;
	        font-weight: bold;
	        color: #007bff;
	        margin-bottom: 20px;
	    }

	    .card-text {
	        font-size: 1rem;
	        color: #555;
	    }

	    /* Styling the Booking Configuration Section */
	    .list-group-item {
	        font-size: 1rem;
	        background-color: #f8f9fa;
	        border: none;
	        padding: 10px;
	        margin-bottom: 10px;
	    }

	    .list-group-item strong {
	        color: #007bff;
	    }

	    .list-group-item small {
	        display: block;
	        color: #888;
	        font-size: 0.875rem;
	    }

	    /* Buttons */
	    .btn-custom {
	        background-color: #007bff;
	        color: white;
	        border-radius: 5px;
	        padding: 10px 20px;
	        text-decoration: none;
	    }

	    .btn-custom:hover {
	        background-color: #0056b3;
	        text-decoration: none;
	    }

	    /* Section styling */
	    section {
	        margin-bottom: 30px;
	    }

	    /* Column layout */
	    .row-cols-md-3 {
	        display: flex;
	        justify-content: space-between;
	        gap: 30px;
	    }

	    /* Mobile responsiveness */
	    @media (max-width: 768px) {
	        .row-cols-md-3 {
	            flex-direction: column;
	            gap: 20px;
	        }
	    }

	    /* Fade-in effect for cards */
	    .card {
	        opacity: 0;
	        transition: opacity 2s ease-in-out;
	    }

	    .card.show {
	        opacity: 1;
	    }
	</style>

</head>
<body>

    <!-- Include the navigation menu -->
    <div th:insert="~{adminmenu :: nav}"></div>

    <main class="container mt-5">
        <h1 class="text-center mb-5">Admin Dashboard</h1>

        <div class="row row-cols-1 row-cols-md-3 g-4">

            <!-- Booking Configuration Section -->
            <section class="col">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h2 class="card-title">Booking Configuration</h2>
                        
                        <div th:if="${bookingDetails != null}">
                            <ul class="list-group">
                                <li class="list-group-item" th:each="bookingDetail : ${bookingDetails}">
                                    <strong th:text="'Resident Name: ' + ${bookingDetail.residentName}"></strong><br>
                                    <strong th:text="'Apartment Name: ' + ${bookingDetail.apartmentName}"></strong><br>
                                    <small th:text="'Booking Date: ' + ${bookingDetail.booking.createdDate}"></small>
                                </li>
                            </ul>
                        </div>
                        <div th:if="${bookingDetails == null}">
                            <p>No booking configuration available</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pending Maintenance Requests Section -->
            <section class="col">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h2 class="card-title">Pending Maintenance Requests</h2>
                        <div th:if="${lastThreePendingRequests != null}">
                            <ul class="list-group">
                                <li class="list-group-item" th:each="request : ${lastThreePendingRequests}">
                                    <strong th:text="'Resident ID: ' + ${request.residentId}"></strong><br>
                                    <span th:text="'Request Description: ' + ${request.requestDescription}"></span><br>
                                    <small th:text="${request.createdAt}"></small>
                                </li>
                            </ul>
                        </div>
                        <div th:if="${lastThreePendingRequests == null}">
                            <p>No pending maintenance requests</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Unread Messages Section -->
            <section class="col">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h2 class="card-title">Unread Messages</h2>
                        <div th:if="${lastThreeMessages != null}">
                            <ul class="list-group">
                                <li class="list-group-item" th:each="message : ${lastThreeMessages}">
                                    <strong th:text="${message.subject}"></strong>
                                    <p class="mb-1" th:text="${#strings.abbreviate(message.message, 100)}"></p>
                                    <small th:text="${message.createdAt}"></small>
                                </li>
                            </ul>
                            <a href="#" th:href="@{/admin/messages}" class="btn btn-custom mt-3">Check Messages</a>
                        </div>
                        <div th:if="${lastThreeMessages == null}">
                            <p>No unread messages</p>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Bootstrap 5 JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script>
        // jQuery for smooth transitions or dynamic updates
        $(document).ready(function() {
            $(".card").hide().fadeIn(3000);  // Fade-in effect for cards
        });
    </script>
</body>
</html>
